<!doctype html>
<html lang="en-us">
  <head>
    <title>Shell Tips // çµ‚æ–¼æ˜ç™½ | tsungyi knows.</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Iansui&display=swap');
    </style>
    <link href="https://tsungyi.li/Blog//fontawesome-free-5.15.4-web/css/all.css" rel="stylesheet"> 
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.126.1">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Li TsungYi" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="https://tsungyi.li/Blog/css/main.min.a209c91de2a631d827e212bd915873536c1d95c5a07e87847737b8b1e9f24140.css" />

    
  
    
      
    
  


    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Shell Tips">
  <meta name="twitter:description" content="è¨˜éŒ„ä¸€äº›æœ€è¿‘å¯« Shell ç”¨åˆ°çš„èªæ³•
ShellCheck å¦‚æœä½ æ˜¯ä½¿ç”¨ Visual Studio Code å¼·çƒˆå»ºè­°å¯ä»¥å®‰è£é€™å€‹å¥—ä»¶ ShellCheckã€‚ å¯ä»¥å¹«ä½ æª¢æŸ¥ Shell çš„éŒ¯èª¤è·Ÿæä¾›å»ºè­°çš„å¯«æ³•ã€‚
shebang ç›¸é—œå®šç¾©å¯ä»¥åƒè€ƒ ç¶­åŸºç™¾ç§‘
shebang å¿…é ˆå¯«åœ¨ shell çš„ç¬¬ä¸€è¡Œï¼Œç”¨ä¾†æŒ‡ç¤ºé€™å€‹è…³æœ¬ä½¿ç”¨çš„ç›´è­¯å™¨ã€‚
#! /bin/bash echo &#34;SHELL = $SHELL&#34; echo &#34;MY SHELL = $(ps -o comm -p $$ | awk &#39;NR==2 { print $1}&#39;)&#34; é›–ç„¶å¯ä»¥ç”¨ç’°å¢ƒè®Šæ•¸ SHELL å–å¾—ä½¿ç”¨çš„ Shell ä¸éä¸¦ä¸æ˜¯å¾ˆæ­£ç¢ºã€‚æ‰€ä»¥éœ€è¦ç”¨å…¶ä»–å‘½ä»¤å–å¾—æ­£ç¢ºçš„ Shellã€‚
åœ¨æˆ‘çš„é›»è…¦ä¸Šå°å‡ºçš„æ˜¯ä½¿ç”¨è€…é è¨­çš„ shell è€Œä¸æ˜¯ shebang æŒ‡å®šçš„ shellã€‚ä½¿ç”¨ ps æ‰èƒ½æ‹¿åˆ°æ­£ç¢ºçš„ shellã€‚
SHELL = /bin/zsh MY SHELL = /bin/bash å¸¸ç”¨çš„å…§å»ºè®Šæ•¸ $?: ä¸Šä¸€å€‹æŒ‡ä»¤æˆ–ç¨‹å¼åŸ·è¡Œçš„å›å‚³å€¼ï¼Œé€šå¸¸ 0 ä»£è¡¨åŸ·è¡ŒæˆåŠŸï¼Œ0 ä»¥å¤–çš„æ•¸å­—è¡¨ç¤ºå¤±æ•— $n: n æ˜¯æ•¸å­—ï¼Œè¡¨ç¤ºç¬¬å¹¾å€‹åƒæ•¸ $#: åƒæ•¸æ•¸é‡ $$: shell åŸ·è¡Œçš„ PID å¦‚æœè¦å–å¾— pipeline çš„å…¶ä¸­ä¸€å€‹éšæ®µçš„çµæœå¯ä»¥ç”¨ ${PIPESTATUS[n]} å…¶ä¸­çš„ n æ˜¯æ•¸å­— redirect é€šå¸¸æœƒç”¨ &gt; info.">

    <meta property="og:url" content="https://tsungyi.li/Blog/posts/shell-tips/">
  <meta property="og:site_name" content="çµ‚æ–¼æ˜ç™½ | tsungyi knows.">
  <meta property="og:title" content="Shell Tips">
  <meta property="og:description" content="è¨˜éŒ„ä¸€äº›æœ€è¿‘å¯« Shell ç”¨åˆ°çš„èªæ³•
ShellCheck å¦‚æœä½ æ˜¯ä½¿ç”¨ Visual Studio Code å¼·çƒˆå»ºè­°å¯ä»¥å®‰è£é€™å€‹å¥—ä»¶ ShellCheckã€‚ å¯ä»¥å¹«ä½ æª¢æŸ¥ Shell çš„éŒ¯èª¤è·Ÿæä¾›å»ºè­°çš„å¯«æ³•ã€‚
shebang ç›¸é—œå®šç¾©å¯ä»¥åƒè€ƒ ç¶­åŸºç™¾ç§‘
shebang å¿…é ˆå¯«åœ¨ shell çš„ç¬¬ä¸€è¡Œï¼Œç”¨ä¾†æŒ‡ç¤ºé€™å€‹è…³æœ¬ä½¿ç”¨çš„ç›´è­¯å™¨ã€‚
#! /bin/bash echo &#34;SHELL = $SHELL&#34; echo &#34;MY SHELL = $(ps -o comm -p $$ | awk &#39;NR==2 { print $1}&#39;)&#34; é›–ç„¶å¯ä»¥ç”¨ç’°å¢ƒè®Šæ•¸ SHELL å–å¾—ä½¿ç”¨çš„ Shell ä¸éä¸¦ä¸æ˜¯å¾ˆæ­£ç¢ºã€‚æ‰€ä»¥éœ€è¦ç”¨å…¶ä»–å‘½ä»¤å–å¾—æ­£ç¢ºçš„ Shellã€‚
åœ¨æˆ‘çš„é›»è…¦ä¸Šå°å‡ºçš„æ˜¯ä½¿ç”¨è€…é è¨­çš„ shell è€Œä¸æ˜¯ shebang æŒ‡å®šçš„ shellã€‚ä½¿ç”¨ ps æ‰èƒ½æ‹¿åˆ°æ­£ç¢ºçš„ shellã€‚
SHELL = /bin/zsh MY SHELL = /bin/bash å¸¸ç”¨çš„å…§å»ºè®Šæ•¸ $?: ä¸Šä¸€å€‹æŒ‡ä»¤æˆ–ç¨‹å¼åŸ·è¡Œçš„å›å‚³å€¼ï¼Œé€šå¸¸ 0 ä»£è¡¨åŸ·è¡ŒæˆåŠŸï¼Œ0 ä»¥å¤–çš„æ•¸å­—è¡¨ç¤ºå¤±æ•— $n: n æ˜¯æ•¸å­—ï¼Œè¡¨ç¤ºç¬¬å¹¾å€‹åƒæ•¸ $#: åƒæ•¸æ•¸é‡ $$: shell åŸ·è¡Œçš„ PID å¦‚æœè¦å–å¾— pipeline çš„å…¶ä¸­ä¸€å€‹éšæ®µçš„çµæœå¯ä»¥ç”¨ ${PIPESTATUS[n]} å…¶ä¸­çš„ n æ˜¯æ•¸å­— redirect é€šå¸¸æœƒç”¨ &gt; info.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-11-07T10:14:38+08:00">
    <meta property="article:modified_time" content="2022-11-07T10:14:38+08:00">
    <meta property="article:tag" content="Shell">


  </head>
  <body>
    <header class="app-header">
      <a href="https://tsungyi.li/Blog/"><img class="app-header-avatar" src="/images/Profile.jpg" alt="Li TsungYi" /></a>
      <h1>çµ‚æ–¼æ˜ç™½ | tsungyi knows.</h1>
      <blockquot>&gt; "I know that I know nothing." ~ Socrates.</blockquote>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/Blog/about.html">About</a>
             | 
          
          <a class="app-header-menu-item" href="/Blog/">Home</a>
             | 
          
          <a class="app-header-menu-item" href="/Blog/tags/">Tags</a>
      </nav>
      <p>Hi, I am Li Tsung-Yi (æå®—æ²‚). I am a game developer from ğŸ‡¹ğŸ‡¼ Taiwan.</p>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Shell Tips</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Nov 7, 2022
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          3 min read
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>
</svg>
              <a class="tag" href="https://tsungyi.li/Blog/tags/shell/">Shell</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <p>è¨˜éŒ„ä¸€äº›æœ€è¿‘å¯« Shell ç”¨åˆ°çš„èªæ³•</p>
<h1 id="shellcheck">ShellCheck</h1>
<p>å¦‚æœä½ æ˜¯ä½¿ç”¨ Visual Studio Code å¼·çƒˆå»ºè­°å¯ä»¥å®‰è£é€™å€‹å¥—ä»¶ <a href="https://marketplace.visualstudio.com/items?itemName=timonwong.shellcheck">ShellCheck</a>ã€‚
å¯ä»¥å¹«ä½ æª¢æŸ¥ Shell çš„éŒ¯èª¤è·Ÿæä¾›å»ºè­°çš„å¯«æ³•ã€‚</p>
<h1 id="shebang"><code>shebang</code></h1>
<p>ç›¸é—œå®šç¾©å¯ä»¥åƒè€ƒ <a href="https://zh.wikipedia.org/zh-tw/Shebang">ç¶­åŸºç™¾ç§‘</a></p>
<p>shebang å¿…é ˆå¯«åœ¨ shell çš„ç¬¬ä¸€è¡Œï¼Œç”¨ä¾†æŒ‡ç¤ºé€™å€‹è…³æœ¬ä½¿ç”¨çš„ç›´è­¯å™¨ã€‚</p>
<pre tabindex="0"><code class="language-shell=" data-lang="shell=">#! /bin/bash

echo &#34;SHELL = $SHELL&#34;
echo &#34;MY SHELL = $(ps -o comm -p $$ | awk &#39;NR==2 { print $1}&#39;)&#34;
</code></pre><p>é›–ç„¶å¯ä»¥ç”¨ç’°å¢ƒè®Šæ•¸ <code>SHELL</code> å–å¾—ä½¿ç”¨çš„ Shell ä¸éä¸¦ä¸æ˜¯å¾ˆæ­£ç¢ºã€‚æ‰€ä»¥éœ€è¦ç”¨å…¶ä»–å‘½ä»¤å–å¾—æ­£ç¢ºçš„ Shellã€‚</p>
<p>åœ¨æˆ‘çš„é›»è…¦ä¸Šå°å‡ºçš„æ˜¯ä½¿ç”¨è€…é è¨­çš„ shell è€Œä¸æ˜¯ shebang æŒ‡å®šçš„ shellã€‚ä½¿ç”¨ ps æ‰èƒ½æ‹¿åˆ°æ­£ç¢ºçš„ shellã€‚</p>
<pre tabindex="0"><code>SHELL = /bin/zsh
MY SHELL = /bin/bash
</code></pre><h1 id="å¸¸ç”¨çš„å…§å»ºè®Šæ•¸">å¸¸ç”¨çš„å…§å»ºè®Šæ•¸</h1>
<ul>
<li><code>$?</code>: ä¸Šä¸€å€‹æŒ‡ä»¤æˆ–ç¨‹å¼åŸ·è¡Œçš„å›å‚³å€¼ï¼Œé€šå¸¸ 0 ä»£è¡¨åŸ·è¡ŒæˆåŠŸï¼Œ0 ä»¥å¤–çš„æ•¸å­—è¡¨ç¤ºå¤±æ•—</li>
<li><code>$n</code>: n æ˜¯æ•¸å­—ï¼Œè¡¨ç¤ºç¬¬å¹¾å€‹åƒæ•¸</li>
<li><code>$#</code>: åƒæ•¸æ•¸é‡</li>
<li><code>$$</code>: shell åŸ·è¡Œçš„ PID</li>
<li>å¦‚æœè¦å–å¾— pipeline çš„å…¶ä¸­ä¸€å€‹éšæ®µçš„çµæœå¯ä»¥ç”¨ <code>${PIPESTATUS[n]}</code> å…¶ä¸­çš„ n æ˜¯æ•¸å­—</li>
</ul>
<h2 id="redirect">redirect</h2>
<p>é€šå¸¸æœƒç”¨ <code>&gt; info.log</code> ä¾†æŠŠè¼¸å‡ºå¯«åˆ°æª”æ¡ˆï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥ç”¨ä¾†å°‡è¼¸å‡ºå¯«åˆ°ä¸åŒçš„ç›®æ¨™ <code>2&gt; error.log | tee output.log</code>ã€‚</p>
<ul>
<li><code>2</code> æ˜¯ stderr</li>
<li><code>tee</code> ç”¨ä¾†æŠŠè¼¸å‡ºåŒæ™‚å¯«åˆ°ç•«é¢è·Ÿæª”æ¡ˆ</li>
</ul>
<p>å¦‚æœè¦éš±è—è¼¸å‡ºå¯ä»¥ä½¿ç”¨ <code>&gt; /dev/null</code></p>
<h1 id="åŸ·è¡Œå¤–éƒ¨å‘½ä»¤">åŸ·è¡Œå¤–éƒ¨å‘½ä»¤</h1>
<p>åœ¨ shell ä¸­å¯ä»¥é€éç›´æ¥åŸ·è¡Œç¨‹å¼ä¾†è¨­å®šè®Šæ•¸</p>
<pre tabindex="0"><code class="language-shell=" data-lang="shell=">RBENV_VERSION=`rbenv version | tr &#39;{print $1}&#39;`
echo &#34;$RBENV_VERSION&#34;
</code></pre><p>ä¸é ShellCheck æœƒå»ºè­°ä¸è¦ä½¿ç”¨ &lsquo;`&rsquo; çš„æ–¹å¼ï¼Œå¯ä»¥æ”¹ç”¨ä»¥ä¸‹å¯«æ³•ï¼š</p>
<pre tabindex="0"><code class="language-shell=" data-lang="shell=">RBENV_VERSION=$(rbenv version)
echo &#34;$RBENV_VERSION&#34;
</code></pre><h1 id="åˆ¤æ–·å¼">åˆ¤æ–·å¼</h1>
<p>åŸºæœ¬çš„ if èªæ³•æ˜¯é€™æ¨£</p>
<pre tabindex="0"><code class="language-shell=" data-lang="shell=">if [ æ¢ä»¶ ]
then
    # do something
elif [ æ¢ä»¶ ]
then
    # do something
else
    # do something
fi
</code></pre><ul>
<li><strong>NOTE</strong> <code>[</code> or <code>]</code> è·Ÿæ¢ä»¶éœ€è¦æœ‰ç©ºæ ¼åˆ†é–‹</li>
</ul>
<p>å¸¸ç”¨çš„æ¢ä»¶æœ‰ï¼š</p>
<h2 id="å­—ä¸²æ¯”å°">å­—ä¸²æ¯”å°</h2>
<ul>
<li><code>&quot;å­—ä¸²1&quot; = &quot;å­—ä¸²2&quot;</code>: æ¯”å°å…©å€‹å­—ä¸²æ˜¯å¦ç›¸åŒ
<ul>
<li>Shellcheck æœƒå»ºè­°å³ä½¿æ˜¯è®Šæ•¸ä¹Ÿè¦åŠ ä¸Š <code>&quot;</code> å› ç‚ºè®Šæ•¸çš„å€¼å¯èƒ½æœ‰ç©ºæ ¼æˆ–ç‰¹æ®Šç¬¦è™Ÿï¼Œæœ‰å¯èƒ½åœ¨ç‰¹å®šè¼¸å…¥æœƒå‡ºå•é¡Œ
<ul>
<li>âŒ <code>if [ KEY = &quot;name&quot; ]</code></li>
<li>â­• <code>if [ &quot;$KEY&quot; = &quot;name&quot; ]</code></li>
</ul>
</li>
</ul>
</li>
<li><code>&quot;å­—ä¸²1&quot; != &quot;å­—ä¸²2&quot;</code>: æ¯”å°å…©å€‹å­—ä¸²æ˜¯å¦ä¸ã„ã„œåŒ</li>
</ul>
<h2 id="æ•¸å€¼æ¯”å°">æ•¸å€¼æ¯”å°</h2>
<ul>
<li><code>è®Šæ•¸1 -eq è®Šæ•¸2</code>: æ¯”å°å…©å€‹æ•¸å­—æ˜¯å¦ç›¸åŒ</li>
<li><code>è®Šæ•¸1 -ne è®Šæ•¸2</code>: æ¯”å°å…©å€‹æ•¸å­—æ˜¯å¦ç›¸åŒ</li>
<li><code>è®Šæ•¸1 -lt è®Šæ•¸2</code>: è®Šæ•¸1 &lt; è®Šæ•¸2</li>
<li><code>è®Šæ•¸1 -gt è®Šæ•¸2</code>: è®Šæ•¸1 &gt; è®Šæ•¸2</li>
<li><code>è®Šæ•¸1 -le è®Šæ•¸2</code>: è®Šæ•¸1 &lt;= è®Šæ•¸2</li>
<li><code>è®Šæ•¸1 -ge è®Šæ•¸2</code>: è®Šæ•¸1 &gt;= è®Šæ•¸2</li>
</ul>
<h2 id="æª”æ¡ˆæª¢æŸ¥">æª”æ¡ˆæª¢æŸ¥</h2>
<ul>
<li><code>-d è·¯å¾‘</code>: æª¢æŸ¥è·¯å¾‘æ˜¯å¦ç‚ºè³‡æ–™å¤¾</li>
<li><code>-e è·¯å¾‘</code>: æª¢æŸ¥è·¯å¾‘çš„æª”æ¡ˆæˆ–è³‡æ–™å¤¾æ˜¯å¦å­˜åœ¨</li>
</ul>
<p><strong>NOTE</strong>: NOT çš„èªæ³•æ˜¯åœ¨æ¢ä»¶å‰é¢åŠ ä¸Š <code>!</code>ï¼Œè¦æª¢æŸ¥æª”æ¡ˆä¸å­˜åœ¨å°±æ˜¯ <code>if [ ! -e &quot;test.ini&quot; ]</code></p>
<h2 id="å¤šæ¢ä»¶æ¯”å°">å¤šæ¢ä»¶æ¯”å°</h2>
<p>å¤šå€‹æ¢ä»¶å¯ä»¥ç”¨ <code>||</code> æˆ–æ˜¯ <code>&amp;&amp;</code> åˆ†éš”å¤šå€‹æ¢ä»¶
Ex. <code>if [ $? -eq 0 ] &amp;&amp; [ -e &quot;test.ini&quot; ]</code></p>
<h2 id="åˆ¤æ–·å…¶ä»–å‘½ä»¤çš„åŸ·è¡Œçµæœ">åˆ¤æ–·å…¶ä»–å‘½ä»¤çš„åŸ·è¡Œçµæœ</h2>
<h4 id="æ–¹æ³•ä¸€">æ–¹æ³•ä¸€</h4>
<pre tabindex="0"><code class="language-shell=" data-lang="shell=">rbenv version
if [ $? -eq 0 ]
then
  # Do something
fi
</code></pre><h4 id="æ–¹æ³•äºŒ">æ–¹æ³•äºŒ</h4>
<pre tabindex="0"><code class="language-shell=" data-lang="shell=">if rbenv version
then
  # Do something
fi
</code></pre><p>å¯ä»¥ç›´æ¥åœ¨ if çš„æ¢ä»¶å¼ä¸­åŸ·è¡Œå‘½ä»¤ã€‚é€™æ¨£æ¯”è¼ƒç°¡æ½”ï¼Œ ShellCheck å»ºè­°ä½¿ç”¨é€™ç¨®æ ¼å¼ã€‚</p>
<h1 id="ä½¿ç”¨è€…è¼¸å…¥">ä½¿ç”¨è€…è¼¸å…¥</h1>
<pre tabindex="0"><code class="language-shell=" data-lang="shell=">echo &#34;What&#39;s your name?&#34;
read varname
echo &#34;Hello $varname&#34;
</code></pre><p>ç•«é¢æœƒè¼¸å‡ºä¸€å€‹ç­‰å¾…è¼¸å…¥çš„æç¤ºï¼Œç­‰å¾…ä½¿ç”¨è€…è¼¸å…¥ã€‚</p>
<pre tabindex="0"><code>What&#39;s your name?
â˜
</code></pre><p>ç­‰åˆ°è¼¸å…¥å­—ä¸²ä¸¦æŒ‰ä¸‹ Enter é€å‡ºä¹‹å¾Œï¼Œè®Šæ•¸çš„å€¼å°±è¢«è¨­å®šç‚ºä½¿ç”¨è€…æ‰€è¼¸å…¥çš„å­—ä¸² ï¼ˆä¸åŒ…å« Enterï¼‰</p>
<pre tabindex="0"><code>What&#39;s your name?
Caesar
Hello Caesar
</code></pre><h2 id="æœ‰ç”¨çš„åƒæ•¸">æœ‰ç”¨çš„åƒæ•¸</h2>
<p>æˆ‘å€‘å¯ä»¥åœ¨ <code>read</code> åŠ ä¸Š <code>-p</code> è¡¨ç¤º <code>read</code> è¦é¡¯ç¤ºçš„æç¤ºå­—ä¸²ï¼Œå°±ä¸éœ€è¦ç”¨ <code>echo</code>ã€‚
ä¹Ÿå¯ä»¥åŠ ä¸Š <code>r</code> æŒ‡å®šä¸å°‡åæ–œç·šè¦–ç‚ºè·³è„«å­—å…ƒã€‚</p>
<pre tabindex="0"><code class="language-shell=" data-lang="shell=">read -rp &#34;What&#39;s your name? &#34; varname
echo &#34;Hello $varname&#34;
</code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ <code>-p</code> æ™‚çš„æç¤ºå­—ä¸²è·Ÿè¼¸å…¥æ¸¸æ¨™æ²’æœ‰æ›è¡Œï¼Œéœ€è¦è‡ªè¡ŒåŠ ä¸Šç©ºæ ¼æ’ç‰ˆï¼Œ</p>
<pre tabindex="0"><code>What&#39;s your name? â˜
</code></pre><p>å¦‚æœè¦ç”¨å¯†ç¢¼è¼¸å…¥çš„è©±å¯ä»¥ç”¨ <code>-s</code> ä¾†éš±è—è¼¸å…¥ã€‚
å› ç‚º <code>-s</code> æœƒå°‡é€å‡ºçš„ Enter ä¹Ÿéš±è—ï¼Œæ‰€ä»¥é¡¯ç¤ºæ™‚å¯ä»¥åŠ ä¸Šä¸€å€‹ç©ºè¡Œä¾†æ’ç‰ˆã€‚</p>
<pre tabindex="0"><code class="language-shell=" data-lang="shell=">read -rp &#34;username? &#34; username
read -srp &#34;password? &#34; password
echo &#34;&#34;
echo &#34;Hello $username&#34;
</code></pre><p>å¦‚æœè¦å¯¦ä½œ &ldquo;press any key to continue&rdquo; å¯ä»¥ç”¨ä»¥ä¸‹çš„èªæ³•ã€‚
ä½¿ç”¨ <code>-n 1</code> ä¾†æŒ‡å®šåªè¦è®€å– 1 å€‹å­—å…ƒã€‚</p>
<pre tabindex="0"><code class="language-shell=" data-lang="shell=">read -rp &#34;username? &#34; username
read -n 1 -srp &#34;press any key to continue&#34; key
echo &#34;&#34;
echo &#34;Hello $username&#34;
</code></pre><p>åŒæ¨£çš„æˆ‘å€‘ä¹Ÿå¯ä»¥ç”¨é€™å€‹æ–¹æ³•ä¾†å¯¦ä½œé¸é …ã€‚</p>
<pre tabindex="0"><code class="language-shell=" data-lang="shell=">read -rp &#34;username? &#34; username
read -n 1 -rp &#34;Are you $username (y/n)? &#34; key
echo &#34;&#34;
if [ &#34;$key&#34; = &#34;y&#34; ]
then
    echo &#34;Hello $username&#34;
fi
</code></pre><h1 id="color">Color</h1>
<p>Shell è¼¸å‡ºçš„æ™‚å€™å¯ä»¥åŠ ä¸Šæ§åˆ¶ç¢¼æ”¹è®Šæ–‡å­—æˆ–æ˜¯èƒŒæ™¯çš„é¡è‰²ï¼Œ
æˆ‘å€‘åœ¨å¯«ä¸€äº›è¼ƒé•·çš„è…³æœ¬æœƒå¸Œæœ›è¼¸å‡ºçš„åœ°æ–¹èƒ½æœ‰è‰²å½©è®ŠåŒ–ï¼Œ
é€™æ¨£åœ¨é–±è®€çš„æ™‚å€™æ¯”è¼ƒå®¹æ˜“æ‰¾åˆ°é‡è¦çš„åœ°æ–¹ã€‚</p>
<p>è‰²ç¢¼çš„é¡è‰²æ–‡å­—è·ŸèƒŒæ™¯çš„é¡è‰²å¯ä»¥åˆ†åˆ¥è¨­å®šã€‚</p>
<h2 id="æ§åˆ¶ç¢¼">æ§åˆ¶ç¢¼</h2>
<p>æ§åˆ¶ç¢¼çš„æ ¼å¼ç‚º <code>\033[xxm</code> å…¶ä¸­çš„ xx å°±æ˜¯é¡è‰²ä»£ç¢¼ã€‚
ä½¿ç”¨çš„æ™‚å€™å¯ä»¥ç”¨ <code>echo -e</code> æŒ‡å®šå¾Œé¢çš„æ–‡å­—å¸¶æœ‰æ§åˆ¶ç¢¼ã€‚
å¦å¤–ï¼Œè¦æ³¨æ„çš„æ˜¯çµæŸçš„æ™‚å€™éœ€è¦ç”¨ <code>\033[0m</code> é€™å€‹ç‰¹æ®Šçš„æ§åˆ¶ç¢¼ (RESET) å°‡æ‰€æœ‰æ ¼å¼æ¸…ç©ºã€‚
å¦å‰‡æ ¼å¼æœƒå½±éŸ¿åˆ°å¾Œé¢çš„è¼¸å‡ºã€‚</p>
<pre tabindex="0"><code class="language-shell=" data-lang="shell=">echo -e &#34;\033[31mhello\033[0m world&#34;
</code></pre><p>ä»¥ä¸Šä»£ç¢¼å°±æœƒé¡¯ç¤ºå‡ºç´…è‰²çš„ hello è€Œ world å‰‡æ˜¯é¡¯ç¤ºé è¨­çš„æ–‡å­—é¡è‰²ã€‚</p>
<h2 id="å‰æ™¯-foreground">å‰æ™¯ foreground</h2>
<p>å‰æ™¯è‰²ä¸€å…±æœ‰ 16 è‰²</p>
<ul>
<li><code>\033[30m</code>: é»‘è‰² (Black)</li>
<li><code>\033[31m</code>: ç´…è‰² (Red)</li>
<li><code>\033[32m</code>: ç¶ è‰² (Green)</li>
<li><code>\033[33m</code>: é»ƒè‰² (Yellow)</li>
<li><code>\033[34m</code>: è—è‰² (Blue)</li>
<li><code>\033[35m</code>: æ´‹ç´…è‰² (Magenta)</li>
<li><code>\033[36m</code>: é’è‰² (Cyan)</li>
<li><code>\033[37m</code>: ç™½è‰² (White)</li>
<li><code>\033[1;30m</code> (or <code>\033[90m</code>): äº®é»‘è‰² (Bright Black / Gray)</li>
<li><code>\033[1;31m</code> (or <code>\033[91m</code>): äº®ç´…è‰² (Bright Red)</li>
<li><code>\033[1;32m</code> (or <code>\033[92m</code>): äº®ç¶ è‰² (Bright Green)</li>
<li><code>\033[1;33m</code> (or <code>\033[93m</code>): äº®é»ƒè‰² (Bright Yellow)</li>
<li><code>\033[1;34m</code> (or <code>\033[94m</code>): äº®è—è‰² (Bright Blue)</li>
<li><code>\033[1;35m</code> (or <code>\033[95m</code>): äº®æ´‹ç´…è‰² (Bright Magenta)</li>
<li><code>\033[1;36m</code> (or <code>\033[96m</code>): äº®é’è‰² (Bright Cyan)</li>
<li><code>\033[1;37m</code> (or <code>\033[97m</code>): äº®ç™½è‰² (Bright White)</li>
</ul>
<h2 id="èƒŒæ™¯-background">èƒŒæ™¯ background</h2>
<p>èƒŒæ™¯è‰²ä¸€å…±æœ‰ 16 è‰²ï¼Œå¯ä»¥ç”¨åˆ†è™Ÿåˆ†éš”å°±è·Ÿå‰æ™¯è‰²ä¸€èµ·ä½¿ç”¨ã€‚</p>
<ul>
<li><code>\033[40m</code>: é»‘è‰² (Black)</li>
<li><code>\033[41m</code>: ç´…è‰² (Red)</li>
<li><code>\033[42m</code>: ç¶ è‰² (Green)</li>
<li><code>\033[43m</code>: é»ƒè‰² (Yellow)</li>
<li><code>\033[44m</code>: è—è‰² (Blue)</li>
<li><code>\033[45m</code>: æ´‹ç´…è‰² (Magenta)</li>
<li><code>\033[46m</code>: é’è‰² (Cyan)</li>
<li><code>\033[47m</code>: ç™½è‰² (White)</li>
<li><code>\033[1;40m</code> (or <code>\033[100m</code>): äº®é»‘è‰² (Bright Black / Gray)</li>
<li><code>\033[1;41m</code> (or <code>\033[101m</code>): äº®ç´…è‰² (Bright Red)</li>
<li><code>\033[1;42m</code> (or <code>\033[102m</code>): äº®ç¶ è‰² (Bright Green)</li>
<li><code>\033[1;43m</code> (or <code>\033[103m</code>): äº®é»ƒè‰² (Bright Yellow)</li>
<li><code>\033[1;44m</code> (or <code>\033[104m</code>): äº®è—è‰² (Bright Blue)</li>
<li><code>\033[1;45m</code> (or <code>\033[105m</code>): äº®æ´‹ç´…è‰² (Bright Magenta)</li>
<li><code>\033[1;46m</code> (or <code>\033[106m</code>): äº®é’è‰² (Bright Cyan)</li>
<li><code>\033[1;47m</code> (or <code>\033[107m</code>): äº®ç™½è‰² (Bright White)</li>
</ul>
<h2 id="å…¶ä»–æ§åˆ¶ç¬¦è™Ÿ">å…¶ä»–æ§åˆ¶ç¬¦è™Ÿ</h2>
<ul>
<li><code>\033[0m</code>: é‡ç½® (Reset)</li>
<li><code>\033[1m</code>: ç²—é«” (Bold)</li>
<li><code>\033[4m</code>: åº•ç·š (Underline)</li>
<li><code>\033[7m</code>: åè½‰å‰æ™¯ã€èƒŒæ™¯è‰² (Reverse)</li>
</ul>
<p>å¦å¤–ä¹Ÿå¯ä»¥ç”¨ä¾†æ§åˆ¶æ¸¸æ¨™ä½ç½®ï¼Œåšåˆ°é¡ä¼¼é€²åº¦æ¢çš„é¡¯ç¤ºã€‚
ç´°ç¯€è«‹åƒè€ƒ<a href="https://www.lihaoyi.com/post/BuildyourownCommandLinewithANSIescapecodes.html">åƒè€ƒè³‡æ–™</a>ã€‚</p>
<p>Ref. <a href="https://sharats.me/posts/shell-script-best-practices/">Shell Script Best Practices</a></p>

    </div>
    <div class="post-footer">
      <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "tsungyi-li" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </article>

    </main>
  </body>
</html>
